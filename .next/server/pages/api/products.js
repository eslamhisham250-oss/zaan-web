"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/products";
exports.ids = ["pages/api/products"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_products_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/products.js */ \"(api)/./pages/api/products.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/products\",\n        pathname: \"/api/products\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_products_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnByb2R1Y3RzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZwcm9kdWN0cy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNvRDtBQUNwRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsbURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLG1EQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3phYW4vPzBlNDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9wcm9kdWN0cy5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Byb2R1Y3RzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvZHVjdHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectDB: () => (/* binding */ connectDB)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n// lib/db.js\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    console.warn(\"⚠️ MONGODB_URI is not set. The app will use fallback data.\");\n}\n// Cache connection across hot-reloads in dev\nlet cached = global._mongoose;\nif (!cached) {\n    cached = global._mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectDB() {\n    if (!MONGODB_URI) return null; // هنسيب الـ API تستخدم Fallback\n    if (cached.conn) return cached.conn;\n    if (!cached.promise) {\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, {\n            // لا تمرر useNewUrlParser/useUnifiedTopology: Deprecated في v4+\n            // ممكن تضيف maxPoolSize مثلاً:\n            maxPoolSize: 10\n        }).then((m)=>m.connection).catch((err)=>{\n            console.error(\"❌ Mongo connect error:\", err?.message || err);\n            return null; // نرجّع null ونسمح للـ API تكمل بـ fallback\n        });\n    }\n    cached.conn = await cached.promise;\n    return cached.conn;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsWUFBWTtBQUNvQjtBQUVoQyxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUNGLFdBQVc7QUFFM0MsSUFBSSxDQUFDQSxhQUFhO0lBQ2hCRyxRQUFRQyxJQUFJLENBQUM7QUFDZjtBQUVBLDZDQUE2QztBQUM3QyxJQUFJQyxTQUFTQyxPQUFPQyxTQUFTO0FBQzdCLElBQUksQ0FBQ0YsUUFBUTtJQUNYQSxTQUFTQyxPQUFPQyxTQUFTLEdBQUc7UUFBRUMsTUFBTTtRQUFNQyxTQUFTO0lBQUs7QUFDMUQ7QUFFTyxlQUFlQztJQUNwQixJQUFJLENBQUNWLGFBQWEsT0FBTyxNQUFNLGdDQUFnQztJQUUvRCxJQUFJSyxPQUFPRyxJQUFJLEVBQUUsT0FBT0gsT0FBT0csSUFBSTtJQUNuQyxJQUFJLENBQUNILE9BQU9JLE9BQU8sRUFBRTtRQUNuQkosT0FBT0ksT0FBTyxHQUFHVix1REFDUCxDQUFDQyxhQUFhO1lBQ3BCLGdFQUFnRTtZQUNoRSwrQkFBK0I7WUFDL0JZLGFBQWE7UUFDZixHQUNDQyxJQUFJLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsVUFBVSxFQUN4QkMsS0FBSyxDQUFDLENBQUNDO1lBQ05kLFFBQVFlLEtBQUssQ0FBQywwQkFBMEJELEtBQUtFLFdBQVdGO1lBQ3hELE9BQU8sTUFBTSw0Q0FBNEM7UUFDM0Q7SUFDSjtJQUNBWixPQUFPRyxJQUFJLEdBQUcsTUFBTUgsT0FBT0ksT0FBTztJQUNsQyxPQUFPSixPQUFPRyxJQUFJO0FBQ3BCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemFhbi8uL2xpYi9kYi5qcz8zZGM5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGxpYi9kYi5qc1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCBNT05HT0RCX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xuXG5pZiAoIU1PTkdPREJfVVJJKSB7XG4gIGNvbnNvbGUud2FybihcIuKaoO+4jyBNT05HT0RCX1VSSSBpcyBub3Qgc2V0LiBUaGUgYXBwIHdpbGwgdXNlIGZhbGxiYWNrIGRhdGEuXCIpO1xufVxuXG4vLyBDYWNoZSBjb25uZWN0aW9uIGFjcm9zcyBob3QtcmVsb2FkcyBpbiBkZXZcbmxldCBjYWNoZWQgPSBnbG9iYWwuX21vbmdvb3NlO1xuaWYgKCFjYWNoZWQpIHtcbiAgY2FjaGVkID0gZ2xvYmFsLl9tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdERCKCkge1xuICBpZiAoIU1PTkdPREJfVVJJKSByZXR1cm4gbnVsbDsgLy8g2YfZhtiz2YrYqCDYp9mE2YAgQVBJINiq2LPYqtiu2K/ZhSBGYWxsYmFja1xuXG4gIGlmIChjYWNoZWQuY29ubikgcmV0dXJuIGNhY2hlZC5jb25uO1xuICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XG4gICAgY2FjaGVkLnByb21pc2UgPSBtb25nb29zZVxuICAgICAgLmNvbm5lY3QoTU9OR09EQl9VUkksIHtcbiAgICAgICAgLy8g2YTYpyDYqtmF2LHYsSB1c2VOZXdVcmxQYXJzZXIvdXNlVW5pZmllZFRvcG9sb2d5OiBEZXByZWNhdGVkINmB2YogdjQrXG4gICAgICAgIC8vINmF2YXZg9mGINiq2LbZitmBIG1heFBvb2xTaXplINmF2KvZhNin2Ys6XG4gICAgICAgIG1heFBvb2xTaXplOiAxMCxcbiAgICAgIH0pXG4gICAgICAudGhlbigobSkgPT4gbS5jb25uZWN0aW9uKVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBNb25nbyBjb25uZWN0IGVycm9yOlwiLCBlcnI/Lm1lc3NhZ2UgfHwgZXJyKTtcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vINmG2LHYrNmR2LkgbnVsbCDZiNmG2LPZhditINmE2YTZgCBBUEkg2KrZg9mF2YQg2KjZgCBmYWxsYmFja1xuICAgICAgfSk7XG4gIH1cbiAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcbiAgcmV0dXJuIGNhY2hlZC5jb25uO1xufVxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiTU9OR09EQl9VUkkiLCJwcm9jZXNzIiwiZW52IiwiY29uc29sZSIsIndhcm4iLCJjYWNoZWQiLCJnbG9iYWwiLCJfbW9uZ29vc2UiLCJjb25uIiwicHJvbWlzZSIsImNvbm5lY3REQiIsImNvbm5lY3QiLCJtYXhQb29sU2l6ZSIsInRoZW4iLCJtIiwiY29ubmVjdGlvbiIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/db.js\n");

/***/ }),

/***/ "(api)/./models/Product.js":
/*!***************************!*\
  !*** ./models/Product.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n// models/Product.js\n\nconst ProductSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    title: {\n        type: String,\n        required: true\n    },\n    short: String,\n    price: {\n        type: Number,\n        required: true\n    },\n    oldPrice: Number,\n    image: String,\n    images: [\n        String\n    ],\n    material: String,\n    color: String,\n    size: String,\n    rating: Number,\n    reviews: Number,\n    category: String,\n    shipping: String,\n    returnPolicy: String,\n    warranty: String,\n    colors: [\n        String\n    ]\n}, {\n    timestamps: true\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Product || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Product\", ProductSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvUHJvZHVjdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxvQkFBb0I7QUFDWTtBQUVoQyxNQUFNQyxnQkFBZ0IsSUFBSUQsd0RBQWUsQ0FDdkM7SUFDRUcsT0FBTztRQUFFQyxNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDdENDLE9BQU9GO0lBQ1BHLE9BQU87UUFBRUosTUFBTUs7UUFBUUgsVUFBVTtJQUFLO0lBQ3RDSSxVQUFVRDtJQUNWRSxPQUFPTjtJQUNQTyxRQUFRO1FBQUNQO0tBQU87SUFDaEJRLFVBQVVSO0lBQ1ZTLE9BQU9UO0lBQ1BVLE1BQU1WO0lBQ05XLFFBQVFQO0lBQ1JRLFNBQVNSO0lBQ1RTLFVBQVViO0lBQ1ZjLFVBQVVkO0lBQ1ZlLGNBQWNmO0lBQ2RnQixVQUFVaEI7SUFDVmlCLFFBQVE7UUFBQ2pCO0tBQU87QUFDbEIsR0FDQTtJQUFFa0IsWUFBWTtBQUFLO0FBR3JCLGlFQUFldkIsd0RBQWUsQ0FBQ3lCLE9BQU8sSUFBSXpCLHFEQUFjLENBQUMsV0FBV0MsY0FBY0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3phYW4vLi9tb2RlbHMvUHJvZHVjdC5qcz8wOWM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIG1vZGVscy9Qcm9kdWN0LmpzXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IFByb2R1Y3RTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgdGl0bGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHNob3J0OiBTdHJpbmcsXG4gICAgcHJpY2U6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIG9sZFByaWNlOiBOdW1iZXIsXG4gICAgaW1hZ2U6IFN0cmluZyxcbiAgICBpbWFnZXM6IFtTdHJpbmddLFxuICAgIG1hdGVyaWFsOiBTdHJpbmcsXG4gICAgY29sb3I6IFN0cmluZyxcbiAgICBzaXplOiBTdHJpbmcsXG4gICAgcmF0aW5nOiBOdW1iZXIsXG4gICAgcmV2aWV3czogTnVtYmVyLFxuICAgIGNhdGVnb3J5OiBTdHJpbmcsXG4gICAgc2hpcHBpbmc6IFN0cmluZyxcbiAgICByZXR1cm5Qb2xpY3k6IFN0cmluZyxcbiAgICB3YXJyYW50eTogU3RyaW5nLFxuICAgIGNvbG9yczogW1N0cmluZ10sXG4gIH0sXG4gIHsgdGltZXN0YW1wczogdHJ1ZSB9XG4pO1xuXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuUHJvZHVjdCB8fCBtb25nb29zZS5tb2RlbChcIlByb2R1Y3RcIiwgUHJvZHVjdFNjaGVtYSk7XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJQcm9kdWN0U2NoZW1hIiwiU2NoZW1hIiwidGl0bGUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJzaG9ydCIsInByaWNlIiwiTnVtYmVyIiwib2xkUHJpY2UiLCJpbWFnZSIsImltYWdlcyIsIm1hdGVyaWFsIiwiY29sb3IiLCJzaXplIiwicmF0aW5nIiwicmV2aWV3cyIsImNhdGVnb3J5Iiwic2hpcHBpbmciLCJyZXR1cm5Qb2xpY3kiLCJ3YXJyYW50eSIsImNvbG9ycyIsInRpbWVzdGFtcHMiLCJtb2RlbHMiLCJQcm9kdWN0IiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./models/Product.js\n");

/***/ }),

/***/ "(api)/./pages/api/products.js":
/*!*******************************!*\
  !*** ./pages/api/products.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/db */ \"(api)/./lib/db.js\");\n/* harmony import */ var _models_Product__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../models/Product */ \"(api)/./models/Product.js\");\n// pages/api/products.js\n\n\nconst fallbackProducts = [\n    {\n        title: \"سرير خشب طبيعي مع تخزين\",\n        short: \"سرير عملي بخامة قوية + ضمان\",\n        price: 2500,\n        oldPrice: 3000,\n        image: \"/images/bed_real.jpg\",\n        images: [\n            \"/images/bed_real.jpg\",\n            \"/images/bed_real_side.jpg\",\n            \"/images/bed_real_size.jpg\"\n        ],\n        description: \"سرير خشبي أنيق مصنوع من خشب طبيعي عالي الجودة مع وحدة تخزين سفلية.\",\n        material: \"خشب طبيعي + MDF\",\n        color: \"بني غامق\",\n        size: \"200x160 سم\",\n        rating: 4.6,\n        reviews: 180,\n        shipping: \"يصل خلال 7 أيام - شحن مجاني\",\n        returnPolicy: \"إرجاع مجاني خلال 14 يوم\",\n        warranty: \"ضمان سنتين على الخشب والتجميع\",\n        colors: [\n            \"#8B4513\",\n            \"#444\",\n            \"#D2B48C\"\n        ],\n        category: \"غرف نوم\"\n    },\n    {\n        title: \"مكتب عملي\",\n        short: \"مكتب خشبي قوي مع درج\",\n        price: 1200,\n        image: \"/images/desk_real.jpg\",\n        category: \"مكاتب\"\n    },\n    {\n        title: \"طاولة قهوة\",\n        short: \"تصميم مودرن\",\n        price: 600,\n        image: \"/images/coffee_table_real.jpg\",\n        category: \"طاولات\"\n    }\n];\nasync function handler(req, res) {\n    // جرّب تتصل بالـ DB\n    const conn = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.connectDB)();\n    // POST → إنشاء (للسيد/الإدارة)\n    if (req.method === \"POST\") {\n        try {\n            if (!conn) return res.status(503).json({\n                success: false,\n                message: \"DB unavailable\"\n            });\n            const body = req.body;\n            const created = await _models_Product__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create(body);\n            return res.json({\n                success: true,\n                product: created\n            });\n        } catch (e) {\n            console.error(\"POST /products error:\", e);\n            return res.status(500).json({\n                success: false,\n                message: \"Failed to create product\"\n            });\n        }\n    }\n    // GET → قراءة\n    try {\n        if (!conn) {\n            return res.json(fallbackProducts.map((p, i)=>({\n                    id: String(i + 1),\n                    ...p\n                })));\n        }\n        const docs = await _models_Product__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find({}).sort({\n            createdAt: -1\n        }).lean();\n        if (!docs?.length) {\n            // لسه فاضي → رجع Fallback\n            return res.json(fallbackProducts.map((p, i)=>({\n                    id: String(i + 1),\n                    ...p\n                })));\n        }\n        // طبع id كـ string\n        const withId = docs.map((d)=>({\n                id: String(d._id),\n                ...d\n            }));\n        return res.json(withId);\n    } catch (e) {\n        console.error(\"GET /products error:\", e);\n        return res.json(fallbackProducts.map((p, i)=>({\n                id: String(i + 1),\n                ...p\n            })));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcHJvZHVjdHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsd0JBQXdCO0FBQ2lCO0FBQ0U7QUFFM0MsTUFBTUUsbUJBQW1CO0lBQ3ZCO1FBQ0VDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLFVBQVU7UUFDVkMsT0FBTztRQUNQQyxRQUFRO1lBQUM7WUFBd0I7WUFBNkI7U0FBNEI7UUFDMUZDLGFBQWE7UUFDYkMsVUFBVTtRQUNWQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsUUFBUTtRQUNSQyxTQUFTO1FBQ1RDLFVBQVU7UUFDVkMsY0FBYztRQUNkQyxVQUFVO1FBQ1ZDLFFBQVE7WUFBQztZQUFXO1lBQVE7U0FBVTtRQUN0Q0MsVUFBVTtJQUNaO0lBQ0E7UUFDRWhCLE9BQU87UUFDUEMsT0FBTztRQUNQQyxPQUFPO1FBQ1BFLE9BQU87UUFDUFksVUFBVTtJQUNaO0lBQ0E7UUFDRWhCLE9BQU87UUFDUEMsT0FBTztRQUNQQyxPQUFPO1FBQ1BFLE9BQU87UUFDUFksVUFBVTtJQUNaO0NBQ0Q7QUFFYyxlQUFlQyxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsb0JBQW9CO0lBQ3BCLE1BQU1DLE9BQU8sTUFBTXZCLGtEQUFTQTtJQUU1QiwrQkFBK0I7SUFDL0IsSUFBSXFCLElBQUlHLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLElBQUk7WUFDRixJQUFJLENBQUNELE1BQU0sT0FBT0QsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBUztnQkFBT0MsU0FBUztZQUFpQjtZQUNuRixNQUFNQyxPQUFPUixJQUFJUSxJQUFJO1lBQ3JCLE1BQU1DLFVBQVUsTUFBTTdCLDhEQUFjLENBQUM0QjtZQUNyQyxPQUFPUCxJQUFJSSxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7Z0JBQU1LLFNBQVNGO1lBQVE7UUFDcEQsRUFBRSxPQUFPRyxHQUFHO1lBQ1ZDLFFBQVFDLEtBQUssQ0FBQyx5QkFBeUJGO1lBQ3ZDLE9BQU9YLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7Z0JBQU9DLFNBQVM7WUFBMkI7UUFDcEY7SUFDRjtJQUVBLGNBQWM7SUFDZCxJQUFJO1FBQ0YsSUFBSSxDQUFDTCxNQUFNO1lBQ1QsT0FBT0QsSUFBSUksSUFBSSxDQUFDeEIsaUJBQWlCa0MsR0FBRyxDQUFDLENBQUNDLEdBQUdDLElBQU87b0JBQUVDLElBQUlDLE9BQU9GLElBQUk7b0JBQUksR0FBR0QsQ0FBQztnQkFBQztRQUM1RTtRQUNBLE1BQU1JLE9BQU8sTUFBTXhDLDREQUFZLENBQUMsQ0FBQyxHQUFHMEMsSUFBSSxDQUFDO1lBQUVDLFdBQVcsQ0FBQztRQUFFLEdBQUdDLElBQUk7UUFDaEUsSUFBSSxDQUFDSixNQUFNSyxRQUFRO1lBQ2pCLDBCQUEwQjtZQUMxQixPQUFPeEIsSUFBSUksSUFBSSxDQUFDeEIsaUJBQWlCa0MsR0FBRyxDQUFDLENBQUNDLEdBQUdDLElBQU87b0JBQUVDLElBQUlDLE9BQU9GLElBQUk7b0JBQUksR0FBR0QsQ0FBQztnQkFBQztRQUM1RTtRQUNBLG1CQUFtQjtRQUNuQixNQUFNVSxTQUFTTixLQUFLTCxHQUFHLENBQUMsQ0FBQ1ksSUFBTztnQkFBRVQsSUFBSUMsT0FBT1EsRUFBRUMsR0FBRztnQkFBRyxHQUFHRCxDQUFDO1lBQUM7UUFDMUQsT0FBTzFCLElBQUlJLElBQUksQ0FBQ3FCO0lBQ2xCLEVBQUUsT0FBT2QsR0FBRztRQUNWQyxRQUFRQyxLQUFLLENBQUMsd0JBQXdCRjtRQUN0QyxPQUFPWCxJQUFJSSxJQUFJLENBQUN4QixpQkFBaUJrQyxHQUFHLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTztnQkFBRUMsSUFBSUMsT0FBT0YsSUFBSTtnQkFBSSxHQUFHRCxDQUFDO1lBQUM7SUFDNUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3phYW4vLi9wYWdlcy9hcGkvcHJvZHVjdHMuanM/NDljYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9hcGkvcHJvZHVjdHMuanNcbmltcG9ydCB7IGNvbm5lY3REQiB9IGZyb20gXCIuLi8uLi9saWIvZGJcIjtcbmltcG9ydCBQcm9kdWN0IGZyb20gXCIuLi8uLi9tb2RlbHMvUHJvZHVjdFwiO1xuXG5jb25zdCBmYWxsYmFja1Byb2R1Y3RzID0gW1xuICB7XG4gICAgdGl0bGU6IFwi2LPYsdmK2LEg2K7YtNioINi32KjZiti52Yog2YXYuSDYqtiu2LLZitmGXCIsXG4gICAgc2hvcnQ6IFwi2LPYsdmK2LEg2LnZhdmE2Yog2KjYrtin2YXYqSDZgtmI2YrYqSArINi22YXYp9mGXCIsXG4gICAgcHJpY2U6IDI1MDAsXG4gICAgb2xkUHJpY2U6IDMwMDAsXG4gICAgaW1hZ2U6IFwiL2ltYWdlcy9iZWRfcmVhbC5qcGdcIixcbiAgICBpbWFnZXM6IFtcIi9pbWFnZXMvYmVkX3JlYWwuanBnXCIsIFwiL2ltYWdlcy9iZWRfcmVhbF9zaWRlLmpwZ1wiLCBcIi9pbWFnZXMvYmVkX3JlYWxfc2l6ZS5qcGdcIl0sXG4gICAgZGVzY3JpcHRpb246IFwi2LPYsdmK2LEg2K7YtNio2Yog2KPZhtmK2YIg2YXYtdmG2YjYuSDZhdmGINiu2LTYqCDYt9io2YrYudmKINi52KfZhNmKINin2YTYrNmI2K/YqSDZhdi5INmI2K3Yr9ipINiq2K7YstmK2YYg2LPZgdmE2YrYqS5cIixcbiAgICBtYXRlcmlhbDogXCLYrti02Kgg2LfYqNmK2LnZiiArIE1ERlwiLFxuICAgIGNvbG9yOiBcItio2YbZiiDYutin2YXZglwiLFxuICAgIHNpemU6IFwiMjAweDE2MCDYs9mFXCIsXG4gICAgcmF0aW5nOiA0LjYsXG4gICAgcmV2aWV3czogMTgwLFxuICAgIHNoaXBwaW5nOiBcItmK2LXZhCDYrtmE2KfZhCA3INij2YrYp9mFIC0g2LTYrdmGINmF2KzYp9mG2YpcIixcbiAgICByZXR1cm5Qb2xpY3k6IFwi2KXYsdis2KfYuSDZhdis2KfZhtmKINiu2YTYp9mEIDE0INmK2YjZhVwiLFxuICAgIHdhcnJhbnR5OiBcIti22YXYp9mGINiz2YbYqtmK2YYg2LnZhNmJINin2YTYrti02Kgg2YjYp9mE2KrYrNmF2YrYuVwiLFxuICAgIGNvbG9yczogW1wiIzhCNDUxM1wiLCBcIiM0NDRcIiwgXCIjRDJCNDhDXCJdLFxuICAgIGNhdGVnb3J5OiBcIti62LHZgSDZhtmI2YVcIixcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcItmF2YPYqtioINi52YXZhNmKXCIsXG4gICAgc2hvcnQ6IFwi2YXZg9iq2Kgg2K7YtNio2Yog2YLZiNmKINmF2Lkg2K/YsdisXCIsXG4gICAgcHJpY2U6IDEyMDAsXG4gICAgaW1hZ2U6IFwiL2ltYWdlcy9kZXNrX3JlYWwuanBnXCIsXG4gICAgY2F0ZWdvcnk6IFwi2YXZg9in2KrYqFwiLFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwi2LfYp9mI2YTYqSDZgtmH2YjYqVwiLFxuICAgIHNob3J0OiBcItiq2LXZhdmK2YUg2YXZiNiv2LHZhlwiLFxuICAgIHByaWNlOiA2MDAsXG4gICAgaW1hZ2U6IFwiL2ltYWdlcy9jb2ZmZWVfdGFibGVfcmVhbC5qcGdcIixcbiAgICBjYXRlZ29yeTogXCLYt9in2YjZhNin2KpcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgLy8g2KzYsdmR2Kgg2KrYqti12YQg2KjYp9mE2YAgREJcbiAgY29uc3QgY29ubiA9IGF3YWl0IGNvbm5lY3REQigpO1xuXG4gIC8vIFBPU1Qg4oaSINil2YbYtNin2KEgKNmE2YTYs9mK2K8v2KfZhNil2K/Yp9ix2KkpXG4gIGlmIChyZXEubWV0aG9kID09PSBcIlBPU1RcIikge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWNvbm4pIHJldHVybiByZXMuc3RhdHVzKDUwMykuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkRCIHVuYXZhaWxhYmxlXCIgfSk7XG4gICAgICBjb25zdCBib2R5ID0gcmVxLmJvZHk7XG4gICAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgUHJvZHVjdC5jcmVhdGUoYm9keSk7XG4gICAgICByZXR1cm4gcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBwcm9kdWN0OiBjcmVhdGVkIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJQT1NUIC9wcm9kdWN0cyBlcnJvcjpcIiwgZSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJGYWlsZWQgdG8gY3JlYXRlIHByb2R1Y3RcIiB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBHRVQg4oaSINmC2LHYp9ih2KlcbiAgdHJ5IHtcbiAgICBpZiAoIWNvbm4pIHtcbiAgICAgIHJldHVybiByZXMuanNvbihmYWxsYmFja1Byb2R1Y3RzLm1hcCgocCwgaSkgPT4gKHsgaWQ6IFN0cmluZyhpICsgMSksIC4uLnAgfSkpKTtcbiAgICB9XG4gICAgY29uc3QgZG9jcyA9IGF3YWl0IFByb2R1Y3QuZmluZCh7fSkuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSkubGVhbigpO1xuICAgIGlmICghZG9jcz8ubGVuZ3RoKSB7XG4gICAgICAvLyDZhNiz2Ycg2YHYp9i22Yog4oaSINix2KzYuSBGYWxsYmFja1xuICAgICAgcmV0dXJuIHJlcy5qc29uKGZhbGxiYWNrUHJvZHVjdHMubWFwKChwLCBpKSA9PiAoeyBpZDogU3RyaW5nKGkgKyAxKSwgLi4ucCB9KSkpO1xuICAgIH1cbiAgICAvLyDYt9io2LkgaWQg2YPZgCBzdHJpbmdcbiAgICBjb25zdCB3aXRoSWQgPSBkb2NzLm1hcCgoZCkgPT4gKHsgaWQ6IFN0cmluZyhkLl9pZCksIC4uLmQgfSkpO1xuICAgIHJldHVybiByZXMuanNvbih3aXRoSWQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkdFVCAvcHJvZHVjdHMgZXJyb3I6XCIsIGUpO1xuICAgIHJldHVybiByZXMuanNvbihmYWxsYmFja1Byb2R1Y3RzLm1hcCgocCwgaSkgPT4gKHsgaWQ6IFN0cmluZyhpICsgMSksIC4uLnAgfSkpKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbm5lY3REQiIsIlByb2R1Y3QiLCJmYWxsYmFja1Byb2R1Y3RzIiwidGl0bGUiLCJzaG9ydCIsInByaWNlIiwib2xkUHJpY2UiLCJpbWFnZSIsImltYWdlcyIsImRlc2NyaXB0aW9uIiwibWF0ZXJpYWwiLCJjb2xvciIsInNpemUiLCJyYXRpbmciLCJyZXZpZXdzIiwic2hpcHBpbmciLCJyZXR1cm5Qb2xpY3kiLCJ3YXJyYW50eSIsImNvbG9ycyIsImNhdGVnb3J5IiwiaGFuZGxlciIsInJlcSIsInJlcyIsImNvbm4iLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJib2R5IiwiY3JlYXRlZCIsImNyZWF0ZSIsInByb2R1Y3QiLCJlIiwiY29uc29sZSIsImVycm9yIiwibWFwIiwicCIsImkiLCJpZCIsIlN0cmluZyIsImRvY3MiLCJmaW5kIiwic29ydCIsImNyZWF0ZWRBdCIsImxlYW4iLCJsZW5ndGgiLCJ3aXRoSWQiLCJkIiwiX2lkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/products.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();